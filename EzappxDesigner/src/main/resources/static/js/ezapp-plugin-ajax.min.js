/*! ezapp-plugin-ajax - 0.0.17 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("grapesjs")):"function"==typeof define&&define.amd?define(["grapesjs"],t):"object"==typeof exports?exports["ezapp-plugin-ajax"]=t(require("grapesjs")):e["ezapp-plugin-ajax"]=t(e.grapesjs)}(window,function(e){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.BlockManager;t.add("weui-msg-page",{label:"结果展示模板",attributes:{class:"fa fa-check-circle-o"},category:"Ajax",content:'\n                <div class="weui-msg">\n                <div class="weui-msg__icon-area"><i class="weui-icon-success weui-icon_msg"></i></div>\n                <div class="weui-msg__text-area">\n                    <h2 class="weui-msg__title" id="display-data">操作成功</h2>\n                    <p class="weui-msg__desc">内容详情，可根据实际需要安排，如果换行则不超过规定长度，居中展现<a href="javascript:void(0);">文字链接</a></p>\n                </div>\n                <div class="weui-msg__opr-area">\n                    <p class="weui-btn-area">\n                    <button data-gjs-type="get-remote-data-btn">获取按钮</button>\n                    </p>\n                </div>\n                </div>\n                '}),t.add("get-remote-data-btn",{label:"按钮组件",attributes:{class:"fa fa-square"},category:"Ajax",content:'\n                <button data-gjs-type="get-remote-data-btn">按钮</button>\n                '}),t.add("get-remote-data-js",{label:"绑定Ajax",category:"Ajax",attributes:{class:"fa fa-cloud-upload"},content:{script:"\n                    var clickHandler = function clickHandler(event) {\n                        var e = event.target;\n                        if(e.tagName === 'BUTTON' && e.hasAttribute('target-id')) {\n                            $.ajax({\n                              url: e.getAttribute(\"url\"),\n                              type: e.getAttribute(\"request-type\"),\n                              dataType: 'json',\n                              success: function (data) { // http code 200  \n                                console.log(\"response data\", data);\n                                var display = document.getElementById(e.getAttribute(\"target-id\"));\n                                console.log(display);\n                                display.textContent = data.message;\n                              }\n                            });\n\n                        }\n                    }\n                    this.addEventListener('click', clickHandler)\n                ",style:{width:"100%","min-height":"100px",height:"auto"}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.DomComponents,n=t.getType("default"),r=n.model,o=n.view;t.addType("get-remote-data-btn",{model:r.extend({defaults:a({},r.prototype.defaults,{droppable:!1,traits:[{type:"content",label:"Text",name:"content",changeProp:1},"target-id","url",{type:"select",label:"type",name:"request-type",options:[{value:"GET",name:"GET"},{value:"POST",name:"POST"}]},{type:"select",label:"按钮类型",name:"class",options:[{value:"weui-btn weui-btn_primary",name:"确认"},{value:"weui-btn weui-btn_default",name:"默认"},{value:"weui-btn weui-btn_warn",name:"警告"}]}]})},{isComponent:function(e){if(e.getAttribute&&"get-remote-data-btn"==e.getAttribute("data-gjs-type"))return{type:"get-remote-data-btn"}}}),view:o.extend({init:function(){console.log("set default attr to button"),this.model.setAttributes({class:"weui-btn weui-btn_primary","target-id":"display-data",url:"http://www.ezappx.com:8800","request-type":"GET"}),this.listenTo(this.model,"change:content",this.updateContent)},updateContent:function(){this.el.innerHTML=this.model.get("content")}})})}},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=u(n(2)),o=u(n(1)),i=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.plugins.add("ezapp-plugin-ajax",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a({},t);(0,o.default)(e,n),(0,i.default)(e,n)})}])});
//# sourceMappingURL=ezapp-plugin-ajax.min.js.map